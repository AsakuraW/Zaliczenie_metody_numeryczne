Metadata-Version: 2.1
Name: audioSpectrum
Version: 1.0.5
Summary: A package for audio spectrum
Home-page: https://github.com/tesla-cat/audioSpectrum
Author: Ding Ruiqi
Author-email: 416640656@qq.com
License: UNKNOWN
Platform: UNKNOWN
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: soundfile
Requires-Dist: midiutil



# audioSpectrum

[7_rings.wav](https://github.com/tesla-cat/audioSpectrum/blob/master/0-examples/audioSpectrum_demo-1/7_rings.wav?raw=true)

[GitHub](https://github.com/tesla-cat/audioSpectrum)

[PyPI](https://pypi.org/project/audioSpectrum/)

## Not my bug

*   Somehow in Google Colab, you need to `run all` many times before you can load the entire sequence, this should be a bug from the dependency: `soundfile`  

## Install


```python
!pip install audioSpectrum
```

## Plot the spectrum


```python
import audioSpectrum as aus
config={
    'fft':{'size':2000},
    'smoothen':{'aCut':0.01,'binary':False},
    'select':{'freqMax':3000,'timeRange':[0,500]},
}
plotConfig={'size':3,'dpi':150,'cmap':'Blues'}

fname = '7_rings.wav'
data, sampleRate = aus.read(fname)
freq,time,fftAmp = aus.spectrum(config,data,sampleRate)
aus.plot(plotConfig,freq,time,fftAmp)
```

    spectrum: data reshaped from (9086976, 2) to (2, 4543, 2000)
    plot: starting



![png](output_3_1.png)


## Reduce frequencies, keep N largest


```python
freq,time,fftAmp = aus.reduceFreqs(freq,time,fftAmp,keep=1,plot=True)
```

    reduceFreqs: old shapes of freq,fftAmp  [(136,), (2, 4542, 136)]
    reduceFreqs: enforce freq[fftAmp==0] = 0
    reduceFreqs: new shapes of freq,fftAmp  [(2, 4542, 1), (2, 4542, 1)]



![png](output_5_1.png)


## Convert to MIDI and save as file


```python
# freq,time,fftAmp must be from aus.reduceFreqs()
notes = aus.toMidi(freq,time,fftAmp,fname,minDuration=0.1)
aus.plotNotes(notes)
```

    toMidi: fftAmp normalized to 126



![png](output_7_1.png)


Output: [7_rings.wav.mid](https://github.com/tesla-cat/audioSpectrum/blob/master/0-examples/audioSpectrum_demo-1/7_rings.wav.mid?raw=true)

### plotNotes from another App

![jpg](image.jpg)

